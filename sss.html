<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>So8å…­ä»£å£°å¡ SKGè°ƒéŸ³å° å‚æ•°å®šåˆ¶å·¥å…·ï¼ˆéŸ³é¢‘è§£æç‰ˆï¼‰</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "å¾®è½¯é›…é»‘", sans-serif;
        }
        body {
            background: #f5f7fa;
            padding: 20px;
            max-width: 1000px;
            margin: 0 auto;
        }
        .container {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
            font-size: 24px;
        }
        h2 {
            color: #34495e;
            font-size: 18px;
            margin: 20px 0 10px;
            padding-bottom: 5px;
            border-bottom: 2px solid #3498db;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            color: #555;
            font-weight: 500;
        }
        input, select, textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
            outline: none;
            transition: border 0.3s;
        }
        input:focus, select:focus, textarea:focus {
            border-color: #3498db;
        }
        input[type="file"] {
            padding: 3px;
        }
        button {
            background: #3498db;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 20px;
            transition: background 0.3s;
        }
        button:hover {
            background: #2980b9;
        }
        .result-area {
            background: #f8f9fa;
            border: 1px solid #eee;
            border-radius: 5px;
            padding: 20px;
            margin-top: 20px;
            display: none;
        }
        .result-area h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 16px;
        }
        .param-item {
            margin-bottom: 10px;
            line-height: 1.8;
        }
        .param-title {
            font-weight: bold;
            color: #3498db;
        }
        .tips {
            color: #e74c3c;
            font-size: 12px;
            margin-top: 5px;
        }
        .audio-analysis {
            background: #e8f4fd;
            padding: 10px;
            border-radius: 5px;
            margin: 15px 0;
            font-size: 13px;
            color: #2c3e50;
            display: none;
        }
        .loading {
            color: #3498db;
            margin-top: 10px;
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>So8å…­ä»£å£°å¡ SKGè°ƒéŸ³å° ä¸“å±å‚æ•°å®šåˆ¶ï¼ˆéŸ³é¢‘è§£æç‰ˆï¼‰</h1>
        
        <!-- è®¾å¤‡ä¿¡æ¯ -->
        <h2>ä¸€ã€è®¾å¤‡ä¿¡æ¯ï¼ˆå¿…å¡«ï¼‰</h2>
        <div class="form-group">
            <label for="mic-model">è¯ç­’å‹å·+ç±»å‹ï¼ˆå¦‚ï¼šæ°‘æ­ŒMG205 åŠ¨åœˆè¯ç­’ï¼‰</label>
            <input type="text" id="mic-model" placeholder="è¯·è¾“å…¥è¯ç­’å‹å·å’Œç±»å‹ï¼Œä¾‹ï¼šèˆ’å°”SM58 åŠ¨åœˆè¯ç­’" required>
        </div>
        <div class="form-group">
            <label for="headset-model">ç›‘å¬è€³æœºå‹å·</label>
            <input type="text" id="headset-model" placeholder="ä¾‹ï¼šæ£®æµ·å¡å°”HD201 å¤´æˆ´å¼è€³æœº">
        </div>
        <div class="form-group">
            <label for="phone-system">æ‰‹æœºç³»ç»Ÿ</label>
            <select id="phone-system" required>
                <option value="">è¯·é€‰æ‹©</option>
                <option value="android">å®‰å“</option>
                <option value="ios">è‹¹æœ</option>
            </select>
        </div>

        <!-- ä½¿ç”¨åœºæ™¯ -->
        <h2>äºŒã€ä½¿ç”¨åœºæ™¯ï¼ˆå¿…å¡«ï¼‰</h2>
        <div class="form-group">
            <label for="usage">æ ¸å¿ƒç”¨é€”</label>
            <select id="usage" required>
                <option value="">è¯·é€‰æ‹©</option>
                <option value="sing-live">ç›´æ’­å”±æ­Œ</option>
                <option value="chat">è¯­éŸ³èŠå¤©</option>
                <option value="audio-book">æœ‰å£°å°è¯´</option>
                <option value="video-record">çŸ­è§†é¢‘å½•éŸ³</option>
            </select>
        </div>
        <div class="form-group">
            <label for="song-style">å¸¸å”±æ­Œæ›²é£æ ¼ï¼ˆå¯å¤šé€‰ï¼Œç”¨é€—å·åˆ†éš”ï¼‰</label>
            <input type="text" id="song-style" placeholder="ä¾‹ï¼šæ…¢æ­Œ,æ°‘è°£,rap" required>
        </div>
        <div class="form-group">
            <label for="noise-level">ç¯å¢ƒå™ªéŸ³æƒ…å†µ</label>
            <select id="noise-level" required>
                <option value="">è¯·é€‰æ‹©</option>
                <option value="quiet">å®‰é™å§å®¤ï¼ˆæ— æ˜æ˜¾å™ªéŸ³ï¼‰</option>
                <option value="slight">è½»å¾®ç¯å¢ƒéŸ³ï¼ˆå¦‚ç©ºè°ƒå£°ï¼‰</option>
                <option value="loud">å™ªéŸ³è¾ƒæ˜æ˜¾ï¼ˆå¦‚çª—å¤–è½¦æµ/äººå£°ï¼‰</option>
            </select>
        </div>

        <!-- å£°çº¿ç‰¹ç‚¹ -->
        <h2>ä¸‰ã€å£°çº¿ç‰¹ç‚¹ï¼ˆé€‰å¡«ï¼Œç²¾å‡†åº¦æ›´é«˜ï¼‰</h2>
        <div class="form-group">
            <label for="voice-type">å£°çº¿ç±»å‹</label>
            <select id="voice-type">
                <option value="">è¯·é€‰æ‹©</option>
                <option value="thin">åç»†</option>
                <option value="thick">åæµ‘åš</option>
                <option value="high">åé«˜éŸ³</option>
                <option value="low">åä½éŸ³</option>
            </select>
        </div>
        <div class="form-group">
            <label for="voice-problem">å¸¸è§é—®é¢˜</label>
            <textarea id="voice-problem" rows="2" placeholder="ä¾‹ï¼šæœ‰é¼»éŸ³ã€å£°éŸ³å‘é—·ã€é«˜é¢‘åˆºè€³ã€å°å£°å”±æ­Œæ˜“æ–­éŸ³"></textarea>
        </div>

        <!-- éŸ³é¢‘ä¸Šä¼  -->
        <h2>å››ã€éŸ³é¢‘æ ·æœ¬ï¼ˆå»ºè®®ä¸Šä¼ ï¼‰</h2>
        <div class="form-group">
            <label for="audio-file">ä¸Šä¼ éŸ³é¢‘ï¼ˆ30-60ç§’ï¼ŒMP3/WAVæ ¼å¼ï¼‰</label>
            <input type="file" id="audio-file" accept=".mp3,.wav">
            <p class="tips">éŸ³é¢‘è¦æ±‚ï¼šå‰10ç§’å½•ç¯å¢ƒå™ªéŸ³ï¼Œä¸­é—´20ç§’æ­£å¸¸è¯´è¯ï¼Œæœ€å10ç§’å”±1å¥æ­Œæ›²ç‰‡æ®µï¼ˆç”¨æ—¥å¸¸éŸ³é‡ï¼‰</p>
        </div>

        <!-- åŠ è½½æç¤º -->
        <div class="loading" id="loading">æ­£åœ¨è§£æéŸ³é¢‘ç‰¹å¾ï¼Œè¯·ç¨å€™...</div>
        
        <!-- éŸ³é¢‘åˆ†æç»“æœ -->
        <div class="audio-analysis" id="audio-analysis"></div>

        <!-- æäº¤æŒ‰é’® -->
        <button id="generate-btn">ç”Ÿæˆä¸“å±è°ƒèŠ‚å‚æ•°</button>

        <!-- å‚æ•°ç»“æœå±•ç¤º -->
        <div class="result-area" id="result-area">
            <h3>âœ… ä½ çš„So8å…­ä»£å£°å¡ SKGè°ƒéŸ³å°ä¸“å±å‚æ•°</h3>
            <div class="param-item">
                <span class="param-title">1. åŸºç¡€æ—‹é’®ï¼š</span>
                <span id="basic-knobs"></span>
            </div>
            <div class="param-item">
                <span class="param-title">2. é™å™ªé˜ˆå€¼ï¼š</span>
                <span id="noise-reduction"></span>
            </div>
            <div class="param-item">
                <span class="param-title">3. å‡è¡¡å™¨ï¼ˆä¸“ä¸šæ¨¡å¼ï¼Œbellæ›²çº¿ï¼‰ï¼š</span>
                <span id="eq-params"></span>
            </div>
            <div class="param-item">
                <span class="param-title">4. å‹ç¼©å™¨ï¼š</span>
                <span id="compressor-params"></span>
            </div>
            <div class="param-item">
                <span class="param-title">5. æ··å“ï¼š</span>
                <span id="reverb-params"></span>
            </div>
            <div class="param-item">
                <span class="param-title">6. ä¼˜åŒ–å»ºè®®ï¼š</span>
                <span id="optimize-tips"></span>
            </div>
        </div>
    </div>

    <script>
        // å…¨å±€å­˜å‚¨éŸ³é¢‘è§£æç»“æœ
        let audioFeatures = {
            duration: 0,          // éŸ³é¢‘æ€»æ—¶é•¿
            noiseEnergy: 0,       // å‰10ç§’å™ªéŸ³æ®µèƒ½é‡ï¼ˆ0-1ï¼‰
            voiceAvgVolume: 0,    // äººå£°æ®µå¹³å‡éŸ³é‡ï¼ˆdBï¼‰
            voicePeakVolume: 0,   // äººå£°æ®µå³°å€¼éŸ³é‡ï¼ˆdBï¼‰
            highFreqEnergy: 0     // äººå£°æ®µé«˜é¢‘èƒ½é‡å æ¯”ï¼ˆ0-1ï¼‰
        };

        // ç›‘å¬æäº¤æŒ‰é’®ç‚¹å‡»
        document.getElementById('generate-btn').addEventListener('click', async function() {
            // è·å–è¡¨å•å€¼
            const micModel = document.getElementById('mic-model').value.trim();
            const phoneSystem = document.getElementById('phone-system').value;
            const usage = document.getElementById('usage').value;
            const songStyle = document.getElementById('song-style').value.trim();
            const noiseLevel = document.getElementById('noise-level').value;
            const voiceType = document.getElementById('voice-type').value;
            const voiceProblem = document.getElementById('voice-problem').value.trim();
            const audioFile = document.getElementById('audio-file').files[0];

            // è¡¨å•éªŒè¯
            if (!micModel || !phoneSystem || !usage || !songStyle || !noiseLevel) {
                alert('è¯·å¡«å†™æ‰€æœ‰å¿…å¡«é¡¹ï¼ˆè®¾å¤‡ä¿¡æ¯ã€ä½¿ç”¨åœºæ™¯ï¼‰ï¼');
                return;
            }

            // å¦‚æœä¸Šä¼ äº†éŸ³é¢‘ï¼Œå…ˆè§£æç‰¹å¾
            if (audioFile) {
                document.getElementById('loading').style.display = 'block';
                await analyzeAudio(audioFile); // è§£æéŸ³é¢‘
                document.getElementById('loading').style.display = 'none';
                document.getElementById('audio-analysis').style.display = 'block';
                // æ˜¾ç¤ºéŸ³é¢‘åˆ†æç»“æœ
                document.getElementById('audio-analysis').innerHTML = `
                    ğŸµ éŸ³é¢‘è§£æç»“æœï¼š<br>
                    - éŸ³é¢‘æ—¶é•¿ï¼š${audioFeatures.duration.toFixed(1)}ç§’<br>
                    - å™ªéŸ³æ®µèƒ½é‡ï¼š${(audioFeatures.noiseEnergy * 100).toFixed(2)}%ï¼ˆå€¼è¶Šé«˜å™ªéŸ³è¶Šå¤§ï¼‰<br>
                    - äººå£°å¹³å‡éŸ³é‡ï¼š${audioFeatures.voiceAvgVolume.toFixed(1)}dB<br>
                    - äººå£°å³°å€¼éŸ³é‡ï¼š${audioFeatures.voicePeakVolume.toFixed(1)}dB<br>
                    - äººå£°é«˜é¢‘èƒ½é‡å æ¯”ï¼š${(audioFeatures.highFreqEnergy * 100).toFixed(2)}%ï¼ˆå€¼è¶Šé«˜é«˜é¢‘è¶Šçªå‡ºï¼‰
                `;
            }

            // ç”Ÿæˆå‚æ•°ï¼ˆåŸºäºè¡¨å•+éŸ³é¢‘ç‰¹å¾ï¼‰
            const params = generateParams({
                micModel, phoneSystem, usage, songStyle, noiseLevel, voiceType, voiceProblem
            });

            // æ¸²æŸ“å‚æ•°åˆ°é¡µé¢
            renderParams(params);

            // æ˜¾ç¤ºç»“æœåŒºåŸŸ
            document.getElementById('result-area').style.display = 'block';
            document.getElementById('result-area').scrollIntoView({ behavior: 'smooth' });
        });

        // æ ¸å¿ƒï¼šè§£æéŸ³é¢‘ç‰¹å¾ï¼ˆWeb Audio APIï¼‰
        function analyzeAudio(audioFile) {
            return new Promise((resolve) => {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const reader = new FileReader();

                reader.onload = function(e) {
                    audioContext.decodeAudioData(e.target.result, function(buffer) {
                        // 1. è·å–éŸ³é¢‘æ€»æ—¶é•¿
                        audioFeatures.duration = buffer.duration;

                        // é‡‡æ ·ç‡å’Œå£°é“æ•°
                        const sampleRate = buffer.sampleRate;
                        const channelData = buffer.getChannelData(0); // å–å•å£°é“

                        // 2. è§£æå‰10ç§’ï¼ˆå™ªéŸ³æ®µï¼‰èƒ½é‡
                        const noiseSamples = sampleRate * 10; // 10ç§’çš„é‡‡æ ·ç‚¹æ•°
                        let noiseSum = 0;
                        for (let i = 0; i < Math.min(noiseSamples, channelData.length); i++) {
                            noiseSum += Math.abs(channelData[i]);
                        }
                        audioFeatures.noiseEnergy = noiseSum / Math.min(noiseSamples, channelData.length);

                        // 3. è§£æä¸­é—´20ç§’ï¼ˆè¯´è¯æ®µï¼‰+ æœ€å10ç§’ï¼ˆå”±æ­Œæ®µï¼‰= äººå£°æ®µ
                        const voiceStart = sampleRate * 10; // 10ç§’å¼€å§‹
                        const voiceEnd = sampleRate * 60;   // 60ç§’ç»“æŸï¼ˆæœ€å¤§ï¼‰
                        const voiceSamples = channelData.slice(voiceStart, Math.min(voiceEnd, channelData.length));
                        
                        // è®¡ç®—äººå£°æ®µå¹³å‡éŸ³é‡ï¼ˆdBï¼‰å’Œå³°å€¼éŸ³é‡
                        let voiceSum = 0;
                        let voicePeak = 0;
                        let highFreqSum = 0; // é«˜é¢‘èƒ½é‡ï¼ˆ>5000Hzï¼‰
                        for (let i = 0; i < voiceSamples.length; i++) {
                            const val = Math.abs(voiceSamples[i]);
                            voiceSum += val;
                            if (val > voicePeak) voicePeak = val;

                            // ç®€æ˜“é«˜é¢‘èƒ½é‡è®¡ç®—ï¼ˆåŸºäºé‡‡æ ·ç‚¹ä½ç½®æ¨¡æ‹Ÿé¢‘ç‡ï¼‰
                            const freq = (i / voiceSamples.length) * sampleRate / 2;
                            if (freq > 5000) highFreqSum += val;
                        }
                        audioFeatures.voiceAvgVolume = 20 * Math.log10(voiceSum / voiceSamples.length || 0.0001);
                        audioFeatures.voicePeakVolume = 20 * Math.log10(voicePeak || 0.0001);
                        audioFeatures.highFreqEnergy = highFreqSum / (voiceSum || 0.0001);

                        resolve();
                    });
                };
                reader.readAsArrayBuffer(audioFile);
            });
        }

        // æ ¸å¿ƒï¼šæ ¹æ®è¡¨å•+éŸ³é¢‘ç‰¹å¾ç”Ÿæˆå®šåˆ¶å‚æ•°
        function generateParams(info) {
            // ========== 1. åŸºç¡€æ—‹é’®ï¼ˆç»“åˆè¯ç­’ç±»å‹+éŸ³é¢‘éŸ³é‡ï¼‰ ==========
            let micVolume = 24; // é»˜è®¤
            let recordVolume = 25; // é»˜è®¤
            if (info.micModel.includes('åŠ¨åœˆ')) micVolume = 26; // åŠ¨åœˆè¯ç­’éŸ³é‡ç¨å¤§
            if (info.micModel.includes('ç”µå®¹')) micVolume = 22; // ç”µå®¹è¯ç­’éŸ³é‡ç¨å°
            if (info.usage === 'sing-live') recordVolume = 24; // ç›´æ’­å”±æ­Œå½•éŸ³éŸ³é‡ç¨ä½
            
            // åŸºäºéŸ³é¢‘äººå£°å³°å€¼è°ƒæ•´å½•éŸ³éŸ³é‡ï¼ˆå³°å€¼è¶Šé«˜ï¼Œå½•éŸ³éŸ³é‡è¶Šä½ï¼‰
            if (audioFeatures.voicePeakVolume > -10) { // éŸ³é‡å¤§
                recordVolume = Math.max(20, recordVolume - 3);
            } else if (audioFeatures.voicePeakVolume < -25) { // éŸ³é‡å°
                recordVolume = Math.min(28, recordVolume + 2);
            }

            // ========== 2. é™å™ªé˜ˆå€¼ï¼ˆç»“åˆå™ªéŸ³é€‰æ‹©+éŸ³é¢‘å™ªéŸ³èƒ½é‡ï¼‰ ==========
            let noiseReduction = '-70db'; // é»˜è®¤
            // ä¼˜å…ˆç”¨éŸ³é¢‘è§£æçš„å™ªéŸ³èƒ½é‡
            if (audioFeatures.noiseEnergy > 0.1) { // å™ªéŸ³å¤§
                noiseReduction = '-60db';
            } else if (audioFeatures.noiseEnergy < 0.02) { // å™ªéŸ³å°
                noiseReduction = '-82db';
            } else {
                // å¤‡ç”¨ï¼šåŸºäºè¡¨å•é€‰æ‹©
                if (info.noiseLevel === 'quiet') noiseReduction = '-80db';
                if (info.noiseLevel === 'slight') noiseReduction = '-75db';
                if (info.noiseLevel === 'loud') noiseReduction = '-65db';
            }
            // å°å£°æ˜“æ–­éŸ³åˆ™è°ƒä½é˜ˆå€¼
            if (info.voiceProblem.includes('å°å£°å”±æ­Œæ˜“æ–­éŸ³')) {
                noiseReduction = (parseInt(noiseReduction) - 8) + 'db';
            }

            // ========== 3. å‡è¡¡å™¨å‚æ•°ï¼ˆç»“åˆå£°çº¿+éŸ³é¢‘é«˜é¢‘èƒ½é‡ï¼‰ ==========
            let eqParams = 'qå€¼ç»Ÿä¸€4.5 | é«˜é€š12æ¡£(40hz) | ä½é€š12æ¡£(12000hz) | ';
            // åŸºäºéŸ³é¢‘é«˜é¢‘èƒ½é‡è°ƒæ•´
            if (audioFeatures.highFreqEnergy > 0.3) { // é«˜é¢‘è¿‡å¼ºï¼ˆåˆºè€³ï¼‰
                eqParams += '5350hzå¢ç›Š-2 | 9500hzå¢ç›Š-1.5 | ';
            } else if (audioFeatures.highFreqEnergy < 0.1) { // é«˜é¢‘ä¸è¶³ï¼ˆå‘é—·ï¼‰
                eqParams += '5350hzå¢ç›Š+2.5 | 9500hzå¢ç›Š+2 | ';
            }
            // åŸºäºå£°çº¿é—®é¢˜è°ƒæ•´
            if (info.voiceProblem.includes('æœ‰é¼»éŸ³')) eqParams += '1350hzå¢ç›Š-2.5 | ';
            if (info.voiceType === 'thin') eqParams += '100hzå¢ç›Š+3.5 | 450hzå¢ç›Š+2.5 | ';
            if (info.voiceType === 'thick') eqParams += '100hzå¢ç›Š-1.5 | 280hzå¢ç›Š-1.5 | ';
            // åŸºç¡€é¢‘ç‚¹è¡¥å……
            eqParams += '100hzå¢ç›Š+2 | 140hzå¢ç›Š-1 | 280hzå¢ç›Š0 | 450hzå¢ç›Š+1.5 | 850hzå¢ç›Š-0.5 | 2800hzå¢ç›Š+1 | 10000hzå¢ç›Š+1.5';

            // ========== 4. å‹ç¼©å™¨å‚æ•°ï¼ˆç»“åˆæ­Œæ›²é£æ ¼+éŸ³é¢‘éŸ³é‡ï¼‰ ==========
            let compressor = 'å‹ç¼©æ¯”4:1 | ';
            let threshold = '-15dbï¼ˆå°å—“é—¨ï¼‰';
            let attackTime = 440;
            let releaseTime = 1700;
            // åŸºäºéŸ³é¢‘éŸ³é‡è°ƒæ•´å‹ç¼©é˜ˆå€¼
            if (audioFeatures.voiceAvgVolume > -15) { // éŸ³é‡å¤§
                threshold = '-25dbï¼ˆå¤§å—“é—¨ï¼‰';
            } else if (audioFeatures.voiceAvgVolume < -25) { // éŸ³é‡å°
                threshold = '-12dbï¼ˆå°å—“é—¨ï¼‰';
            }
            // åŸºäºå£°çº¿/æ­Œæ›²é£æ ¼è°ƒæ•´
            if (info.songStyle.includes('å¿«æ­Œ') || info.songStyle.includes('rap')) {
                attackTime = 800;
                releaseTime = 1500;
            }
            compressor += `é˜ˆå€¼ï¼š${threshold} | å¼€å§‹æ—¶é—´ï¼š${attackTime} | é‡Šæ”¾æ—¶é—´ï¼š${releaseTime} | å¢ç›Šè¡¥å¿ï¼š+${audioFeatures.voiceAvgVolume < -20 ? 3 : 2}`;

            // ========== 5. æ··å“å‚æ•°ï¼ˆæ ¹æ®ç”¨é€”+éŸ³é¢‘éŸ³é‡ï¼‰ ==========
            let reverb = '';
            let dryWet = 82;
            let reverbVol = 22;
            // åŸºäºéŸ³é¢‘éŸ³é‡è°ƒæ•´æ··å“
            if (audioFeatures.voiceAvgVolume < -20) { // äººå£°å°ï¼Œé™ä½æ··å“é¿å…ç›–è¿‡äººå£°
                dryWet = 78;
                reverbVol = 18;
            }
            if (info.usage === 'sing-live') {
                reverb = `å¹²æ¹¿æ¯”${dryWet}% | æ··å“éŸ³é‡${reverbVol} | é¢„å»¶è¿Ÿ18ms | æ··å“æ—¶é—´4600ms`;
            } else if (info.usage === 'chat') {
                reverb = `å¹²æ¹¿æ¯”${dryWet - 10}% | æ··å“éŸ³é‡${reverbVol - 7} | é¢„å»¶è¿Ÿ15ms | æ··å“æ—¶é—´3000ms`;
            } else if (info.usage === 'audio-book') {
                reverb = `å¹²æ¹¿æ¯”${dryWet - 20}% | æ··å“éŸ³é‡${reverbVol - 12} | é¢„å»¶è¿Ÿ10ms | æ··å“æ—¶é—´2000ms`;
            } else {
                reverb = `å¹²æ¹¿æ¯”${dryWet - 2}% | æ··å“éŸ³é‡${reverbVol - 2} | é¢„å»¶è¿Ÿ20ms | æ··å“æ—¶é—´4000ms`;
            }

            // ========== 6. ä¼˜åŒ–å»ºè®®ï¼ˆç»“åˆéŸ³é¢‘ç‰¹å¾ï¼‰ ==========
            let tips = '';
            if (audioFeatures.voicePeakVolume > -5) {
                tips += '1. ä½ çš„äººå£°å³°å€¼éŸ³é‡è¾ƒé«˜ï¼Œå»ºè®®å½•éŸ³éŸ³é‡å†é™ä½2-3ï¼Œé¿å…çˆ†éŸ³ï¼›';
            } else if (audioFeatures.voiceAvgVolume < -30) {
                tips += '1. ä½ çš„äººå£°å¹³å‡éŸ³é‡è¾ƒä½ï¼Œå»ºè®®è¯ç­’éŸ³é‡æé«˜2-3ï¼Œå‹ç¼©å¢ç›Šè¡¥å¿+4ï¼›';
            }
            if (audioFeatures.noiseEnergy > 0.15) {
                tips += '2. å™ªéŸ³æ®µèƒ½é‡è¾ƒé«˜ï¼Œå»ºè®®å¢åŠ å¸éŸ³æ£‰/å…³é—­é—¨çª—ï¼Œé™å™ªé˜ˆå€¼å¯å¾®è°ƒè‡³-55dbï¼›';
            }
            if (audioFeatures.highFreqEnergy > 0.3) {
                tips += '3. äººå£°é«˜é¢‘èƒ½é‡è¿‡å¼ºï¼Œè‹¥ä»åˆºè€³å¯å°†5350hzå¢ç›Šå†å‡1ï¼›';
            } else if (audioFeatures.highFreqEnergy < 0.1) {
                tips += '3. äººå£°é«˜é¢‘èƒ½é‡ä¸è¶³ï¼Œè‹¥å£°éŸ³å‘é—·å¯å°†9500hzå¢ç›Šå†+1ï¼›';
            }
            // åŸºç¡€å»ºè®®è¡¥å……
            if (!tips) {
                tips = '1. è‹¥å”±æ­Œçˆ†éŸ³ï¼Œå¯å°†å½•éŸ³éŸ³é‡å†é™ä½1-2ï¼›2. è‹¥æ··å“ç›–è¿‡äººå£°ï¼Œå¯é™ä½æ··å“éŸ³é‡æˆ–å¹²æ¹¿æ¯”ï¼›';
            }
            if (info.voiceProblem.includes('é¼»éŸ³')) tips += '4. è‹¥é¼»éŸ³ä»æ˜æ˜¾ï¼Œå¯å°†1350hzå¢ç›Šå†å‡1ï¼›';

            return {
                basic: `è¯ç­’éŸ³é‡ï¼š${micVolume} | è€³æœºéŸ³é‡ï¼š25 | ä¼´å¥éŸ³é‡ï¼š23 | å½•éŸ³éŸ³é‡ï¼š${recordVolume} | éŸ³æ•ˆéŸ³é‡ï¼š18`,
                noise: noiseReduction,
                eq: eqParams,
                compressor: compressor,
                reverb: reverb,
                tips: tips
            };
        }

        // æ¸²æŸ“å‚æ•°åˆ°é¡µé¢
        function renderParams(params) {
            document.getElementById('basic-knobs').textContent = params.basic;
            document.getElementById('noise-reduction').textContent = params.noise;
            document.getElementById('eq-params').textContent = params.eq;
            document.getElementById('compressor-params').textContent = params.compressor;
            document.getElementById('reverb-params').textContent = params.reverb;
            document.getElementById('optimize-tips').textContent = params.tips;
        }
    </script>
</body>
</html>